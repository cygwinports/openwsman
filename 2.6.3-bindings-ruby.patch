--- origsrc/openwsman-2.6.3/bindings/ruby/CMakeLists.txt	2016-06-21 06:36:20.000000000 -0500
+++ src/openwsman-2.6.3/bindings/ruby/CMakeLists.txt	2016-07-04 00:12:57.024120700 -0500
@@ -35,10 +35,11 @@ ADD_CUSTOM_COMMAND (
 SET( CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -Wall" )
 
 SET(rbwsman_SRCS ${SWIG_OUTPUT} ${CMAKE_CURRENT_SOURCE_DIR}/../openwsman.c )
-ADD_LIBRARY( rbwsman SHARED ${rbwsman_SRCS} )
+ADD_LIBRARY( rbwsman MODULE ${rbwsman_SRCS} )
 # prevent 'lib...'
 SET_TARGET_PROPERTIES( rbwsman PROPERTIES PREFIX "" )
 SET_TARGET_PROPERTIES( rbwsman PROPERTIES OUTPUT_NAME "_openwsman" )
+SET_TARGET_PROPERTIES( rbwsman PROPERTIES SUFFIX ".so" )
 
 INCLUDE_DIRECTORIES( ${RUBY_INCLUDE_PATH} )
 INCLUDE_DIRECTORIES( ${RUBY_INCLUDE_PATH}/${RUBY_ARCH} )
@@ -48,6 +49,7 @@ INCLUDE_DIRECTORIES( ${CMAKE_SOURCE_DIR}
 TARGET_LINK_LIBRARIES( rbwsman wsman )
 TARGET_LINK_LIBRARIES( rbwsman wsman_client )
 TARGET_LINK_LIBRARIES( rbwsman ${LIBXML2_LIBRARIES} )
+TARGET_LINK_LIBRARIES( rbwsman ${RUBY_LIBRARY} )
 
 # copy .so file to ARCH_DIR
 INSTALL(TARGETS rbwsman LIBRARY DESTINATION ${RUBY_WSMAN_ARCH_DIR})
